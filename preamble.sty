% Keine floats in andere Sections
\usepackage[section]{placeins}

% Weitere Pakete
\usepackage{microtype}
\usepackage{caption}
\usepackage{fontspec}
\usepackage{pdflscape}
\usepackage{float}
\usepackage{dirtree}
\usepackage{subcaption}
\usepackage{enumitem}

% Booktabs Tabellen
\usepackage{tabularray}
\UseTblrLibrary{booktabs}
\DefTblrTemplate{contfoot-text}{normal}{Fortsetzung auf nächster Seite}
\SetTblrTemplate{contfoot-text}{normal}
\DefTblrTemplate{conthead-text}{normal}{}
\SetTblrTemplate{conthead-text}{normal}

% Um Captions in Tabellen zu deaktivieren
%\DefTblrTemplate{caption-tag}{default}{}
%\DefTblrTemplate{caption-sep}{default}{}
%\DefTblrTemplate{caption-text}{default}{}

% Grafiken aus PNG Dateien einbinden
\usepackage{graphicx}

% Deutsche Sonderzeichen und Silbentrennung nutzen
\usepackage[ngerman]{babel}
\usepackage{blindtext}

% Eurozeichen einbinden
\usepackage[right]{eurosym}

% Kopf- und Fußzeilen
\usepackage[headsepline,autooneside=false]{scrlayer-scrpage}
\clearpairofpagestyles

% Schriftart
\usepackage{lmodern}
\setmainfont{TeX Gyre Termes}
\setsansfont{TeX Gyre Adventor}

% Floatende Bilder ermöglichen
\usepackage{floatflt}

% tikz
\usepackage{tikz}
\usetikzlibrary{calc,arrows,math}
\usetikzlibrary{shapes.geometric,positioning}

%% Schaltpläne nach europäischen Richtlinien
\usepackage[european]{circuitikz}
\tikzset{x=1mm,y=1mm}

\usepackage{siunitx}
\sisetup{output-decimal-marker={,},detect-all}

% Bricht lange URLs "schön" um
\usepackage[hyphens,obeyspaces,spaces]{url}

% Paket für Textfarben
\usepackage{xcolor}
\definecolor{LightGray}{gray}{0.9}

% Mathematische Symbole importieren
\usepackage{amssymb}

% Paket für Zeilenabstand
\usepackage{setspace}

% Für Bildbezeichner
\usepackage{capt-of}

% Für Stichwortverzeichnis
\usepackage{makeidx}

% Für if und while
\usepackage{etoolbox}

% --------------------------------

% Konfiguriere das Inhaltsverzeichnis
\usepackage{tocbasic}
\DeclareTOCStyleEntries[
  raggedentrytext,
  %numwidth=0pt, if numbers=noenddot is not set
  numsep=1ex,
  dynnumwidth,
]{tocline}{chapter,section}
\DeclareTOCStyleEntries[
  linefill=\TOCLineLeaderFill,
]{tocline}{section,subsection,subsubsection,paragraph,subparagraph}

\newcommand*\tocentryformat[1]{{\rmfamily#1}}
\RedeclareSectionCommands
[tocentryformat=\tocentryformat,tocpagenumberformat=\tocentryformat]{subsection,subsubsection,paragraph,subparagraph}

\newcommand*\tocentrysectionformat[1]{{\rmfamily\bfseries#1}}
\RedeclareSectionCommands
[tocentryformat=\tocentrysectionformat,tocpagenumberformat=\tocentrysectionformat]{section}

\DeclareTOCStyleEntries[
  pagenumberbox=\hbox,
  dynnumwidth]{tocline}{chapter,section,subsection,subsubsection,paragraph,subparagraph,figure,table}

% Für schönere Listings
\usepackage[outputdir=log, newfloat,]{minted}
\setminted{
  frame=lines,
  framesep=2mm,
  baselinestretch=1.2,
  bgcolor=LightGray,
  fontsize=\footnotesize,
  linenos,
  breaklines=true,
  breakanywhere=true,
  autogobble,
  tabsize=2
}
\setmintedinline{}

% Keine Floats bei Listings
\newenvironment{code}[2]
{\captionsetup{type=listing}
  \providecommand{\captiontitle}{#1}
  \providecommand{\labeltitle}{#2}
  \vspace*{0.3cm}
}
{
  \vspace*{-0.8cm}
  \caption{\captiontitle}
  \label{\labeltitle}
  \vspace*{0.35cm}
}
\SetupFloatingEnvironment{listing}{}


% Nummerierung inkl. Section
\usepackage{chngcntr}
\counterwithin{table}{section}
\counterwithin{figure}{section}
\counterwithin{listing}{section}

% Abkürzungsverzeichnis
\usepackage[printonlyused, smaller, withpage]{acronym}

% Erzeugt Inhaltsverzeichnis mit Querverweisen zu den Abschnitten (PDF Version)
\usepackage[pdfencoding=auto,hidelinks,bookmarksnumbered,hyperfootnotes=false,hypertexnames=false]{hyperref}
\hypersetup{
  colorlinks=true,
  linkcolor=black,
  filecolor=blue,
  citecolor = black,
  urlcolor=blue,
}

% Darf erst hier eingebunden werden!
\usepackage{subfiles}
\usepackage{csquotes}

% Indexerstellung
\makeindex

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                 %
%                   Definition Zitierstil                         %
%                                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Zitierung nach IEEE

\usepackage[
  backend=biber,
  style=ieee,
  autocite=inline,
]{biblatex}
\addbibresource{reference.bib}

% Zitierung nach APA

%\usepackage[
%backend=biber,
%style=apa,
%autocite=inline,
%]{biblatex}
%\addbibresource{reference.bib}

\setcounter{biburllcpenalty}{7000}
\setcounter{biburlucpenalty}{8000}